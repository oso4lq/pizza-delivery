<!-- gallery.component.html -->

@let _currentImage = currentImage(); @let _images = images();

<div #galleryContainer class="swiper-container swiper-gallery">
  <!-- Кнопка закрытия -->
  <button
    type="button"
    class="close-btn"
    (click)="close()"
    aria-label="Закрыть"
  >
    ✕
  </button>

  <!-- Основная галерея -->
  <div class="swiper-wrapper swiper-wrapper-main">
    @for(image of _images; track image.ID){
    <div class="swiper-slide swiper-gallery-card">
      <div class="swiper-zoom-container">
        <img
          [src]="image.url"
          [alt]="image.name || 'Изображение'"
          loading="lazy"
        />
      </div>
    </div>
    }
  </div>

  <!-- Информация о изображении -->
  @if(_currentImage?.name || _currentImage?.description){
  <div class="info-block">
    @if(_currentImage.name){
    <div class="file-name">{{ _currentImage.name }}</div>
    } @if(_currentImage.description){
    <div class="file-description">{{ _currentImage.description }}</div>
    }
  </div>
  }

  <!-- Футер с превью -->
  @if(_images.length > 1){
  <footer class="footer">
    <div class="footer__content">
      <div class="footer__preview">
        <div #thumbsContainer class="swiper-container swiper-thumbs">
          <div class="swiper-wrapper swiper-thumbs-wrapper">
            @for(image of _images; track image.ID){
            <div class="swiper-slide thumb">
              <img
                [src]="image.url"
                [alt]="image.name || 'thumb-' + image.ID"
                loading="lazy"
              />
            </div>
            }
          </div>
        </div>
      </div>
    </div>
  </footer>
  }

  <!-- Навигация -->
  @if(_images.length > 1){
  <div class="swiper-controls">
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
  </div>
  }
</div>
